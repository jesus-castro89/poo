# Actividad 13: Ocultando Celdas y Exportando el Sudoku en texto plano

## Descripci贸n

En esta actividad, aprender谩s a ocultar ciertas celdas en un Sudoku y a exportar el Sudoku en formato de texto plano.
Esto es 煤til para compartir puzzles con otros o para imprimirlos.

## Objetivos

- Aprender a ocultar celdas espec铆ficas en un Sudoku.
- Exportar el Sudoku en formato de texto plano.
- Practicar la manipulaci贸n de datos en estructuras de Sudoku.
- Desarrollar habilidades para compartir y presentar puzzles de Sudoku en formato legible.

## Instrucciones

1. **Crear un enumerado para las celdas ocultas**:
    - Define un enumerado llamado `SudokuLevel` con los siguientes niveles:
        - `Easy`, 36 celdas vac铆as
        - `Medium`, 46 celdas vac铆as
        - `Hard`, 54 celdas vac铆as
2. **Funci贸n para ocultar celdas**:
    - Implementa una funci贸n `hideCells(sudoku: SudokuBoard, level: SudokuLevel) -> SudokuBoard` que tome un Sudoku
      completo y un nivel de dificultad, y oculte el n煤mero correspondiente de celdas al azar.
    - Siguiendo el siguiente algoritmo:
        - Crea una lista de todas las posiciones de celdas en el Sudoku.
        - Mezcla la lista de posiciones.
        - Selecciona las primeras N posiciones de la lista, donde N es el n煤mero de celdas a ocultar seg煤n el nivel.
        - Establece el valor de esas celdas en vac铆o (0 o None).
3. **Validar la unicidad del Sudoku**:
    - Aseg煤rate de que el Sudoku resultante despu茅s de ocultar las celdas tenga una soluci贸n 煤nica.
    - Si no es as铆, repite el proceso de ocultar celdas hasta que se logre una soluci贸n 煤nica.
    - Por lo que tenemos que tener una funci贸n `hasUniqueSolution(sudoku: SudokuBoard) -> Bool` que verifique si el
      Sudoku tiene una
      soluci贸n 煤nica.
    - Y la funci贸n `countSolutions(sudoku: SudokuBoard) -> int` que cuente el n煤mero de soluciones posibles para el
      Sudoku dado.
4. **Funci贸n para exportar el Sudoku en texto plano**:
    - Implementa una funci贸n `exportSudokuToText(sudoku: SudokuBoard) -> String` que convierta el Sudoku en una
      representaci贸n de texto plano.
    - El formato debe ser el siguiente:
        - Cada fila del Sudoku debe estar en una l铆nea separada.
        - Los n煤meros deben estar separados por espacios.
        - Oh bien usar el builder de la funci贸n `printSudoku` como referencia.
5. **Prueba las funciones**:
    - Crea un Sudoku completo utilizando la funci贸n `generateSudoku`.
    - Usa la funci贸n `hideCells` para ocultar celdas seg煤n diferentes niveles de dificultad.
    - Exporta el Sudoku resultante a texto plano usando `exportSudokuToText`.
    - Imprime el resultado en la consola para verificar que las celdas ocultas y el formato de texto plano sean
      correctos.

## Metodolog铆a

Para completar esta actividad, sigue estos pasos:

### Reestructurar el proyecto

Debemos reestructurar el proyecto en los siguientes paquetes y clases:

* `sudoku.entities`:
    - `SudokuCell`: Clase que representa una celda individual en el Sudoku.
        - Contendr谩 atributos como `row`, `col`, `value` y `isFixed`.
        - M茅todos para obtener y establecer valores.
    - `SudokuBoard`: Clase que representa el tablero de Sudoku.
        - Contendr谩 un HashMap `SudokuCell`.
        - M茅todos para inicializar el tablero, obtener una celda, clonar el tablero y la funci贸n generaci贸n de "llaves"
          para el hashmap.
    - `SudokuLevel`: Enumerado que define los niveles de dificultad y la cantidad de celdas a ocultar.
* `sudoku.utils`:
    - `SudokuUtils`: Clase que contendr谩 las funciones `hideCells`, `hasUniqueSolution` y `countSolutions`.
    - `SudokuGenerator`: Clase que contendr谩 la funci贸n `fillBoard`.
    - `SudokuPrinter`: Clase que contendr谩 la funci贸n `printSudoku`.
    - `SudokuValidator`: Clase que contendr谩 la funci贸n `isSafe`.
    - `SudokuExporter`: Clase que contendr谩 la funci贸n `exportToText`.
* `sudoku.main`:
    - `Main`: Clase principal para ejecutar el programa y probar las funciones implementadas.

```
 Sudoku
src
app
sudoku
entities
SudokuCell.java
SudokuBoard.java
SudokuLevel.java
util
SudokuGenerator.java
SudokuPrinter.java
SudokuUtils.java
SudokuValidator.java
Main.java
```

漏generated by [Project Tree Generator](https://woochanleee.github.io/project-tree-generator)

Lo anterior es solo una sugerencia de estructura, adaptada a los principios **SOLID** y a la separaci贸n de
responsabilidades, pero puedes ajustarla seg煤n tus necesidades y preferencias.

> Recuerda que debes adaptar las funciones existentes a esta nueva estructura.
> {style="note"}

### Crear el enumerado SudokuLevel

Deberemos de crear un nuevo enumerado llamado `SudokuLevel` para definir los niveles de dificultad y la cantidad de
celdas a ocultar. Con los siguientes atributos:

* `String description`: Una descripci贸n del nivel de dificultad.
* `int hiddenCells`: El n煤mero de celdas vac铆as que se deben ocultar

> Recuerda que los niveles son: `Easy`, 36 celdas vac铆as; `Medium`, 46 celdas vac铆as; `Hard`, 54 celdas vac铆as.
> {style="note"}

### Implementar la funci贸n hideCells y hasUniqueSolution

Para la implementaci贸n de la funci贸n `hideCells`, `hasUniqueSolution` y `countSolutions`, sigue estos pasos:

* Crea la clase `SudokuUtils` en el paquete `sudoku.utils`.
* Implementa la funci贸n `hideCells` siguiendo el siguiente algoritmo:
    - Comienza los intentos en 0.
    - Mientras los intentos sean menores a un l铆mite (por ejemplo, 1000):
        - Crea una copia del Sudoku original.
        - Mientras el n煤mero de celdas ocultas sea menor que el requerido por el nivel:
            - Genera una posici贸n aleatoria en el Sudoku.
            - Si la celda en esa posici贸n no est谩 vac铆a, oc煤ltala (establece su valor en 0 o None).
        - Verifica si el Sudoku resultante tiene una soluci贸n 煤nica usando `hasUniqueSolution`.
        - Si tiene una soluci贸n 煤nica, retorna el Sudoku con las celdas ocultas.
        - Incrementa el contador de intentos.
    - Si no se logra un Sudoku con soluci贸n 煤nica despu茅s de los intentos, lanza una excepci贸n o retorna un valor nulo.
* Implementa la funci贸n `hasUniqueSolution` que utilice `countSolutions` para verificar si el Sudoku tiene exactamente
  una soluci贸n.
* Implementa la funci贸n `countSolutions` que cuente el n煤mero de soluciones posibles para el Sudoku dado utilizando un
  enfoque de backtracking mediante el siguiente algoritmo:
    - Si no hay celdas vac铆as, incrementa el contador de soluciones y retorna.
    - Para cada n煤mero del 1 al 9:
        - Si el n煤mero es seguro para colocar en la celda vac铆a actual:
            - Coloca el n煤mero en la celda.
            - Llama recursivamente a `countSolutions` para la siguiente celda vac铆a.
            - Remueve el n煤mero (backtrack).
    - Retorna el contador de soluciones.

### Implementar la funci贸n exportSudokuToText

Para la implementaci贸n de la funci贸n `exportSudokuToText`, sigue estos pasos:

1. Crea la clase `SudokuExporter` en el paquete `sudoku.utils`.
2. Modifica la funci贸n `printSudoku` para que devuelva una cadena en lugar de imprimir directamente en la consola.
3. Implementa la funci贸n `exportSudokuToText` que utilice la l贸gica de `printSudoku` para construir una representaci贸n
   de texto plano del Sudoku.
4. Crea una variable `File` para guardar el resultado en un archivo de texto.
5. Escribe la cadena resultante en el archivo de texto.
6. Cierra el archivo para asegurarte de que los datos se guarden correctamente.
7. Prueba la funci贸n exportando un Sudoku a un archivo de texto y verifica su contenido.

> Recuerda manejar posibles excepciones al trabajar con archivos, como errores de escritura o permisos. Y de igual
> forma, aseg煤rate de que el formato de salida sea claro y legible. Siempre puedes consultar el apartado "[Guardando
> datos en archivos de texto plano](plaint-text.md)" para m谩s detalles.
> {style="note"}

## Entrega

En un solo documento `PDF`, incluye lo siguiente:

1. Portada con lo siguiente:
    - Nombre del curso
    - Nombre de la actividad
    - Nombre de los integrantes del equipo
2. C贸digo fuente bien documentado.
3. Capturas de pantalla de las pruebas realizadas, mostrando los Sudokus generados, las celdas ocultas y el contenido
   del archivo de texto exportado.
4. Breve explicaci贸n de c贸mo implementaste cada funci贸n y cualquier desaf铆o que enfrentaste durante el proceso.

## Criterios de evaluaci贸n

| Criterio                             | Descripci贸n                                                                                                               | Puntuaci贸n |
|--------------------------------------|---------------------------------------------------------------------------------------------------------------------------|------------|
| Implementaci贸n de hideCells          | La funci贸n oculta correctamente el n煤mero adecuado de celdas seg煤n el nivel de dificultad y garantiza una soluci贸n 煤nica. | 40%        |
| Implementaci贸n de exportSudokuToText | La funci贸n exporta el Sudoku en el formato de texto plano especificado y maneja correctamente la escritura en archivos.   | 40%        |
| Documentaci贸n y pruebas              | El c贸digo est谩 bien documentado y se incluyen capturas de pantalla de las pruebas realizadas.                             | 20%        |
| **Total**                            |                                                                                                                           | **100%**   |